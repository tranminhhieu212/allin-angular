<div class="flex items-center justify-end gap-4 mb-4">
  <div class="flex items-center justify-between gap-4 w-full">
    <ng-content select="[table-actions]"></ng-content>
    <div class="flex items-center justify-between gap-4">
      <button nz-button nzType="default" (click)="clearFilters()">Reset Filters</button>
      <app-external-filters *ngIf="externalFilter" [columnDef]="columnDef"></app-external-filters>
    </div>
  </div>

  <app-column-visibility
    *ngIf="columnVisibility"
    [columns]="columnVisibilityList"
    (visibilityChange)="onVisibilityChange($event)"
    (columnOrderChange)="onColumnOrderChange($event)"
    (resetToDefault)="onResetColumnVisibility()"
  ></app-column-visibility> 
</div>

<ag-grid-angular
    class="ag-theme-alpine w-full h-[700px]"
    [rowData]="serverSidePagination ? displayRowData : rowData"
    [columnDefs]="columnVisibility ? visibleColumnDefs : columnDef"
    [defaultColDef]="defaultColDef"
    [gridOptions]="gridOptions"
    (gridReady)="onGridReady($event)"
    (filterChanged)="onFilterChanged($event)"
></ag-grid-angular>

<div *ngIf="serverSidePagination && totalRows > 0" class="ag-theme-alpine flex items-center justify-end gap-2 p-2 border-t border-gray-200">
  <span class="text-sm text-gray-700">
    {{ paginationStart }} to {{ paginationEnd }} of {{ totalRows }}
  </span>
  <div class="flex gap-1">
    <button
      (click)="goToFirstPage()"
      [disabled]="!hasPrevPage"
      class="px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
      title="First Page">
      ««
    </button>
    <button
      (click)="goToPrevPage()"
      [disabled]="!hasPrevPage"
      class="px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
      title="Previous Page">
      «
    </button>
    <span class="px-2 py-1 text-sm">
      Page {{ currentPage }} of {{ totalPages }}
    </span>
    <button
      (click)="goToNextPage()"
      [disabled]="!hasNextPage"
      class="px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
      title="Next Page">
      »
    </button>
    <button
      (click)="goToLastPage()"
      [disabled]="!hasNextPage"
      class="px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
      title="Last Page">
      »»
    </button>
  </div>
</div>